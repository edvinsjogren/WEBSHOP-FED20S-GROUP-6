<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ninetynine</title>
    <link rel="stylesheet" href="/CSS/main.css">
</head>
<body>
    <header><%- include("./layout/navbar.ejs") %></header>
    <main>
      <div>
        <%donationsInCart.forEach(donationsInCart => { %>
          <p><%=donationsInCart.projectID.title%></p>
          <p><%=donationsInCart.projectID.summary%></p>
          <p>You are about to donate: <%=donationsInCart.donationAmount%> $</p>
        <% }) %>
      </div>
      <h2>Total amount of donations</h2>
      <p><%= totalSumInCart %> $</p>


      <button type="submit" class="checkout"> Buy </button>

    </main>
    <footer><%- include("./layout/footer.ejs") %></footer>
</body>
</html>

<script src="https://js.stripe.com/v3/"></script>

<script>

var stripe = Stripe('<%=stripePublicKey%>');

document.querySelector(".checkout").addEventListener( "click", ()=>{
    stripe.redirectToCheckout({ sessionId: "<%=sessionId %>" });
})


</script>