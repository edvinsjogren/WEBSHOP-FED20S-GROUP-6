<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ninetynine</title>
    <link rel="stylesheet" href="/CSS/main.css" />
  </head>
  <body>
    <main>
      
      <div class="projectContainer">
        <h1><%=projects.title%></h2>

        <div class="projectImgAndDesc">

          <div class="projectImage">
            <% projects.img.forEach(img => { %>
              <img
                  src="/Uploads/<%=img.path%>"
                  alt="Project Image could not be displayed"
                  height="200px"
                  width="200px"
                />
            <% }) %>
          </div>

          <div class="projectDesc">
            <p><%=projects.description%></p>
            
            <div class="projectExtraInfo">
              <p>Category: <%=projects.category%></p>
              <p>Summary: <%=projects.summary%></p>
    
              <p>Created by: <b><%=projects.owner%></b></p>
            </div>
          </div>
        </div>
      </div>

      <form action="/edit" method="post" enctype="multipart/form-data">

        <input type="text" name="id" value="<%=projects._id %>" hidden />
        
        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot to choose a title! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="title">Title: </label>
        <input class="form-control" type="text" name="title" placeholder="Title" />

        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot to choose a category! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="category">Category: </label>
        <input class="form-control" type="text" name="category" placeholder="Category" />

        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot to choose a description! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="description">Description: </label>
        <textarea class="form-control" name="description" placeholder="Description" ></textarea>

        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot to choose a summary! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="summary">Summary: </label>
        <input class="form-control" type="text" name="summary" placeholder="Summary" />

        <input class="form-control" type="text" name="imageID" value="<%=projects.img[0]._id%>" hidden/>
        
        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot to choose a picture in PNG-format! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="image">Image: </label>
        <input class="form-control" type="file" name="image" />

        <% errors.forEach(errorMessage => { %>
          <% if(errorMessage.includes(' You forgot a name for your picture! Please try again!')) { %>
            <p><%=errorMessage%></p>
          <% } %>
        <% }) %>
        <label for="picName">Picture name: </label>
        <input class="form-control" type="text" name="picName" placeholder="Name your picture" />

        

        <button type="submit">Update</button>
      </form>

      <p><a href="/admin">Go back!</a></p>
    </main>
  </body>
</html>